function serialize(objs) {	var out = "";	for (var i = 0; i < objs.length; i++) {		var propKey = objs[i].name + "=";		if (out.indexOf(propKey) == -1) {			out += "&" + propKey;		}		var position = out.indexOf(propKey) + propKey.length;		out = out.substring(0, position) + objs[i].value + "," + out.substring(position);	}	return out.substring(1, out.length - 1).replace(/\,\&/g, "&");}/** * Filters control class */var Filters = (function () {	function Filters() {		var self = this;		this.clearUrl = Routing.generate('filter', {'category': currentCategoryAlias});		this.$filters = $('#filters');		this.$filters.on('change', 'input', this.applyFilters.bind(this));	}	/**	 * Apply filters	 */	Filters.prototype.applyFilters = function () {		var serialised_array = this.$filters.serializeArray();		var filters = serialize(serialised_array);		var price_from = $('#min').val();		var price_to = $('#max').val();		setTimeout(function () {			window.location = this.clearUrl + '?' + filters + '&price_from=' + price_from + '&price_to=' + price_to + '&sort=' + $('select.sorting_dropdown').val();		}.bind(this), 1500);	};	return Filters;})();/** * Sorting control class */var Sort = (function () {	function Sort() {		var self = this;        if(current_route == 'category'){            this.clearUrl = Routing.generate('category', {'category': currentCategoryAlias});        }else{            this.clearUrl = Routing.generate('filter', {'category': currentCategoryAlias});        }		this.$sort = $('select.sorting_dropdown');		this.$sort.on('change', this.applySort.bind(this));	}	/**	 * Apply filters	 */    Sort.prototype.applySort = function () {		var serialised_array = this.$sort.serializeArray();		var filters = serialize(serialised_array);		var price_from = $('#min').val();		var price_to = $('#max').val();		setTimeout(function () {            if(current_route == 'category'){                window.location = this.clearUrl + '?sort='+ $('select.sorting_dropdown').val();            }else{                window.location = this.clearUrl + '?' + filters + '&price_from=' + price_from + '&price_to=' + price_to + '&sort=' + $('select.sorting_dropdown').val();            }		}.bind(this), 500);	};	return Sort;})();$(window).ready(function () {	new Filters();	new Sort();});