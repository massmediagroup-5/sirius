/** * List add to cart buttons */var CartButtonsLists = (function(superClass) {	extend(CartButtonsLists, superClass);	function CartButtonsLists() {		var self = this;		CartButtonsLists.__super__.constructor.call(this);		$(document).on('click', '.js_change_model', function (e) {			self.changeModel($(this));			e.preventDefault();		});		$(document).on('click', '.js_add_in_cart', function (e) {			self.addInCartClick($(this));			e.preventDefault();		});		$(document).on('change', '.js_cart_size', function (e) {			self.changeFormAction($(this));			e.preventDefault();		});		// Hide all models elements		$('.js_model_form').hide();		$('.js_wish_button').hide();		$('.js_flag').hide();		$('.js_item_price_block').hide();		$('.js_item').each(function () {			var firstId = $(this).find('.js_model_form').data('model-id');			$(this).find('.js_model_form[data-model-id="' + firstId + '"]').show();			$(this).find('.js_wish_button[data-id="' + firstId + '"]').show();			$(this).find('.js_flag[data-id="' + firstId + '"]').show();			$(this).find('.js_item_price_block[data-model-id="' + firstId + '"]').show();		});	}	// Show model dependencies	CartButtonsLists.prototype.changeModel = function ($button) {		var $forms = $button.closest('.js_item').find('.js_model_form'),			$wishes = $button.closest('.js_item').find('.js_wish_button'),			$prices = $button.closest('.js_item').find('.js_item_price_block'),			$flags = $button.closest('.js_item').find('.js_flag');		$forms.hide();		$forms.filter('[data-model-id="' + $button.data('model-id') + '"]').show();		$wishes.hide();		$wishes.filter('[data-id="' + $button.data('model-id') + '"]').show();		$prices.hide();		$prices.filter('[data-model-id="' + $button.data('model-id') + '"]').show();		$flags.hide();		$flags.filter('[data-id="' + $button.data('model-id') + '"]').show();		var srcNew = $button.attr("data-big-img");		var thisImg = $button.closest('.item').find('.img img');		thisImg.attr('src', srcNew);		$button.closest('.color-slider__i').find('.js_change_model').removeClass('active');		$button.addClass('active');	};	// Show model dependencies	CartButtonsLists.prototype.successSubmit = function ($item, data) {		CartButtonsLists.__super__.successSubmit.call(this, $item, data);		$('.darkness').removeClass('active');		$item.removeClass('active').find('.sizes').removeClass('active');		$item.data('addBtnClickNumber', 0);	};	CartButtonsLists.prototype.addInCartClick = function ($button) {		var $item = $button.closest('.js_item'),			clickNumber = $item.data('addBtnClickNumber');		if(clickNumber > 0) {			clickNumber++;		} else {			clickNumber = 1;		}		$item.data('addBtnClickNumber', clickNumber);		// Make element form active on first click		if(clickNumber == 1) {			$item.addClass('active').find('.sizes').addClass('active');			$('.darkness').addClass('active');		} else {			$button.closest('.js_model_form').submit();		}	};	CartButtonsLists.prototype.changeFormAction = function ($sizeSelect) {		CartButtonsLists.__super__.changeFormAction.call(this, $sizeSelect);		$sizeSelect.closest('.js_item').find('.js_item_price_block').hide();		$sizeSelect.closest('.js_item').find('.js_item_price_block[data-size-id="' + $sizeSelect.val() + '"]').show()	};	return CartButtonsLists;})(CartButtons);$(document).ready(function () {	new CartButtonsLists();	$('.js_change_model.js_selected').each(function () {		$(this).click();	});});